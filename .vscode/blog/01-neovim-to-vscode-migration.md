# NeovimからVSCodeへ - 設定移行完全ガイド

長年Neovimを使ってきた私ですが、最近VSCodeやCursorも併用するようになりました。チーム開発での統一性や、一部の拡張機能の便利さに惹かれたからです。

しかし、Neovimで慣れ親しんだキーバインディングや操作感を諦めるのは辛い。そこで、Neovimの設定をできる限りVSCodeに移植してみました。

## なぜ移行するのか

Neovimは素晴らしいエディタです。高速で、カスタマイズ性が高く、ターミナルとの親和性も抜群です。それでもVSCodeを使う理由はいくつかあります。

1. チームメンバーとの設定共有が簡単
2. デバッグ機能の統合が優れている
3. GUI環境でのマルチカーソルやリファクタリング機能
4. 拡張機能のエコシステムが豊富

とはいえ、Neovimの操作感は手放せません。そこで、両方の良いところを組み合わせることにしました。

## 移行戦略

設定移行は段階的に進めました。

### 第1段階 - 基本設定の移植

まず最初に取り組んだのは、基本的なエディタ設定の移植です。Neovimの`options.lua`で設定していた内容をVSCodeの`settings.json`に変換しました。

```json
{
  "editor.lineNumbers": "relative",
  "editor.tabSize": 2,
  "editor.insertSpaces": true,
  "editor.renderLineHighlight": "all",
  "editor.cursorStyle": "line"
}
```

相対行番号、インデント幅、カーソル行のハイライトなど、日々のコーディングで重要な設定を優先的に移植しました。

### 第2段階 - Vimキーバインディング

VSCodeVim拡張機能を使用することで、基本的なVim操作は簡単に実現できます。しかし、カスタムキーバインディングの移植には工夫が必要でした。

特に苦労したのは、`jj`でインサートモードから抜ける設定です。日本語入力時の`っj`も考慮する必要がありました。

```json
{
  "vim.insertModeKeyBindings": [
    {
      "before": ["j", "j"],
      "after": ["<Esc>"]
    },
    {
      "before": ["っ", "j"],
      "after": ["<Esc>"]
    }
  ]
}
```

### 第3段階 - Leaderキーの設定

Neovimでは`<Space>`をLeaderキーとして使っていました。VSCodeでも同じ操作感を実現するため、詳細なキーマッピングを設定しました。

LSP機能、ファイル検索、Git操作など、頻繁に使う機能をLeaderキーから呼び出せるようにしています。

## 最大の課題 - Telescope.nvimの再現

Neovimで最も愛用していたのがTelescope.nvimです。ファジーファインダーとしての使い勝手は抜群で、これなしでは開発効率が大幅に落ちてしまいます。

VSCodeのデフォルトのファイル検索機能では物足りなかったため、カスタム拡張機能を作成することにしました。ripgrepを使った高速検索と、Telescopeライクなインターフェースを実装しています。

```typescript
const quickPick = vscode.window.createQuickPick<TelescopeItem>();
quickPick.placeholder = 'Type to search files...';
quickPick.matchOnDescription = true;
quickPick.matchOnDetail = true;
```

完全な再現とはいきませんが、基本的な使用感は維持できました。

## 移行後の感想

1ヶ月ほど使ってみて、予想以上に快適に作業できています。もちろん、Neovimの方が優れている点もあります。

- 起動速度はNeovimの方が圧倒的に速い
- マクロ記録と再生はVimの方が直感的
- ターミナル統合はNeovimの方が自然

一方で、VSCodeの利点も実感しています。

- デバッグ時の変数ウォッチが便利
- Git統合のビジュアル表示が分かりやすい
- ペアプログラミング時の画面共有がスムーズ

## 今後の改善点

まだ完全には移行できていない機能もあります。

1. カスタムオペレータの実装
2. より高度なテキストオブジェクト
3. Luaスクリプトで実装していた独自機能

これらは今後、必要に応じて拡張機能として実装していく予定です。

## まとめ

NeovimからVSCodeへの移行は、思っていたよりもスムーズに行えました。完全に同じ環境にはなりませんが、それぞれのエディタの長所を活かしながら使い分けることで、より効率的な開発環境を構築できています。

もしあなたもNeovimとVSCodeの併用を考えているなら、段階的な移行をおすすめします。まずは基本的なキーバインディングから始めて、徐々に高度な機能を移植していくことで、ストレスなく移行できるはずです。

設定ファイルは[GitHubリポジトリ](https://github.com/yourusername/dotfiles)で公開していますので、参考にしていただければ幸いです。

---

*2025年6月 執筆*